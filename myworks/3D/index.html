<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>module</title>
    <link rel="stylesheet" href="style/style.css">
    <script src="scripts/three.js"></script>
    <script src="scripts/GLTFLoader.js"></script>
    <script src="scripts/script.js"></script>
</head>
<body>
<!--    <canvas id="c"></canvas>-->

    <script type="module">
        import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/controls/OrbitControls.js'


        // alert("            w - вперёд\n" +
        //     "            s - назад\n" +
        //     "            a - влево\n" +
        //     "            d - вправо\n" +
        //     "            ShiftLeft - вниз\n" +
        //     "            Space - вверх\n" +
        //     "            z - сбросить наклон по оси z\n" +
        //     "            x - сбросить наклон по оси x\n" +
        //     "            c - сбросить наклон по оси y");

        const SPEED_CAMERA = 0.01;
        // блокировка
        module.init({
            'keys_capture' : true,
            'mouse_capture' : true,
            'mouse_lock' : true,
        });


        module.addCube({
            'position' : module.v(0,0,0),
            'color' : '#723636'
        });

        module.addCube({
            'position' : module.v(2,0,0),
            'color' : '#367270'
        });



        // управление
        module.on('keydown', (keys) => {
            // console.log(keys);
            if (keys.KeyW)
                module.getCamera().translateZ(-SPEED_CAMERA);
            else if (keys.KeyS)
                module.getCamera().translateZ(SPEED_CAMERA);
            if (keys.KeyA)
                module.getCamera().translateX(-SPEED_CAMERA);
            else if (keys.KeyD)
                module.getCamera().translateX(SPEED_CAMERA);
            if (keys.ShiftLeft)
                module.getCamera().translateY(-SPEED_CAMERA);
            else if (keys.Space)
                module.getCamera().translateY(SPEED_CAMERA);
            if (keys.KeyZ)
                module.getCamera().rotation.z = 0;
            else if (keys.KeyX)
                module.getCamera().rotation.x = 0;
            else if (keys.KeyC)
                module.getCamera().rotation.y = 0;
        });

        module.on('keypress', (keys) => {
            console.log('down', keys);
        });
        module.on('keyup', (keys) => {
            console.log('up', keys);
        });


        module.on('mousedown', (mouse) => {
            console.log('down', mouse);
            //смотреть в центр
            // module.getCamera().lookAt(0, 0, 0);

        });
        module.on('mousemove', (mouse) => {
            // console.log('move', mouse.position);
                module.getCamera().rotateY(-mouse.speed.x * 0.005);
                module.getCamera().rotateX(-mouse.speed.y * 0.005);

        });


    </script>
</body>
</html>










